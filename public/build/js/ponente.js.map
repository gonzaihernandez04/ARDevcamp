{"version":3,"sources":["ponente.js"],"names":["ponentesInput","document","querySelector","listadoPonentes","ponenteHidden","ponentes","ponentesFiltrados","seleccionarPonente","e","ponente","target","ponentePrevio","classList","remove","toggle","value","dataset","ponenteId","async","respuesta","fetch","arrayPonentes","map","nombre","apellido","trim","id","formatearPonentes","json","obtenerPonentes","addEventListener","busqueda","length","expresion","RegExp","filter","toLowerCase","search","firstChild","removeChild","forEach","ponenteHTML","createElement","add","textContent","onclick","appendChild","noResultados","mostrarPonentes"],"mappings":"AAAA,MACI,MAAMA,EAAgBC,SAASC,cAAc,aAE7C,GAAGF,EAAc,CACb,MAAMG,EAAkBF,SAASC,cAAc,qBAEzCE,EAAgBH,SAASC,cAAc,uBAC7C,IAAIG,EAAW,GACXC,EAAoB,GA0ExB,SAASC,EAAmBC,GACxB,MAAMC,EAAUD,EAAEE,OAEZC,EAAgBV,SAASC,cAAc,4CAC1CS,GACCA,EAAcC,UAAUC,OAAO,2CAGnCJ,EAAQG,UAAUE,OAAO,2CACzBV,EAAcW,MAAQN,EAAQO,QAAQC,WA5E1CC,iBACI,MACMC,QAAkBC,MADZ,kBAMhB,SAA2BC,EAAgB,IACvChB,EAAWgB,EAAcC,IAAIb,IACnB,CACFc,OAAQ,GAAGd,EAAQc,UAAUd,EAAQe,WAAWC,OAChDC,GAAGjB,EAAQiB,MAPnBC,OADwBR,EAAUS,QAPtCC,GAEA7B,EAAc8B,iBAAiB,SAoB/B,SAAwBtB,GACpB,MAAMuB,EAAWvB,EAAEE,OAAOK,MAC1B,GAAGgB,EAASC,OAAO,EAAE,CACjB,MAAMC,EAAY,IAAIC,OAAOH,EAAS,KACtCzB,EAAoBD,EAAS8B,OAAO1B,IAChC,IAAsD,GAAnDA,EAAQc,OAAOa,cAAcC,OAAOJ,GACnC,OAAOxB,SAKfL,EAAcW,MAAQ,GACtBT,EAAoB,IAO5B,WAEI,KAAMH,EAAgBmC,YAClBnC,EAAgBoC,YAAYpC,EAAgBmC,YAIhD,GAAGhC,EAAkB0B,OAAO,EACxB1B,EAAkBkC,QAAQ/B,IACtB,MAAMgC,EAAcxC,SAASyC,cAAc,MAC3CD,EAAY7B,UAAU+B,IAAI,6BAC1BF,EAAYG,YAAcnC,EAAQc,OAClCkB,EAAYzB,QAAQC,UAAYR,EAAQiB,GACxCe,EAAYI,QAAUtC,EAGtBJ,EAAgB2C,YAAYL,SAG/B,CACD,MAAMM,EAAe9C,SAASyC,cAAc,KAC5CK,EAAanC,UAAU+B,IAAI,mCAC3BI,EAAaH,YAAc,qCAC3BzC,EAAgB2C,YAAYC,IA3BhCC,QAhDZ","file":"ponente.js","sourcesContent":["(()=>{\r\n    const ponentesInput = document.querySelector('#ponentes');\r\n\r\n    if(ponentesInput){\r\n        const listadoPonentes = document.querySelector('#listado-ponentes');\r\n\r\n        const ponenteHidden = document.querySelector('[name=\"ponente_id\"]');\r\n        let ponentes = [];\r\n        let ponentesFiltrados = [];\r\n\r\n\r\n        obtenerPonentes();\r\n        \r\n        ponentesInput.addEventListener('input',buscarPonentes);\r\n\r\n        async function obtenerPonentes(){\r\n            const url = `/api/ponentes`;\r\n            const respuesta = await fetch(url);\r\n            const resultado = await respuesta.json();\r\n            formatearPonentes(resultado)\r\n        }\r\n\r\n        function formatearPonentes(arrayPonentes = []){\r\n            ponentes = arrayPonentes.map(ponente=>{\r\n                return{\r\n                    nombre: `${ponente.nombre} ${ponente.apellido}`.trim(),\r\n                    id:ponente.id\r\n                }\r\n            });\r\n\r\n\r\n        }\r\n\r\n        function buscarPonentes(e){\r\n            const busqueda = e.target.value;\r\n            if(busqueda.length>2){\r\n                const expresion = new RegExp(busqueda,\"i\");\r\n                ponentesFiltrados = ponentes.filter(ponente=>{\r\n                    if(ponente.nombre.toLowerCase().search(expresion) != -1){\r\n                        return ponente;\r\n                    }   \r\n                });\r\n\r\n            }else{\r\n                ponenteHidden.value = '';\r\n                ponentesFiltrados = [];\r\n            }\r\n            \r\n            mostrarPonentes()\r\n\r\n        }\r\n\r\n        function mostrarPonentes(){\r\n            \r\n            while(listadoPonentes.firstChild){\r\n                listadoPonentes.removeChild(listadoPonentes.firstChild);\r\n            }\r\n\r\n\r\n            if(ponentesFiltrados.length>0){\r\n                ponentesFiltrados.forEach(ponente=>{\r\n                    const ponenteHTML = document.createElement('LI');\r\n                    ponenteHTML.classList.add('listado-ponentes__ponente');\r\n                    ponenteHTML.textContent = ponente.nombre;\r\n                    ponenteHTML.dataset.ponenteId = ponente.id;\r\n                    ponenteHTML.onclick = seleccionarPonente;\r\n    \r\n                    //AÃ±adir al DOM\r\n                    listadoPonentes.appendChild(ponenteHTML);\r\n    \r\n                })\r\n            }else{\r\n                const noResultados = document.createElement('P');\r\n                noResultados.classList.add('listado-ponentes__no--resultado');\r\n                noResultados.textContent = \"No hay resultados para tu busqueda\";\r\n                listadoPonentes.appendChild(noResultados);\r\n\r\n            }\r\n\r\n           \r\n        }\r\n\r\n        function seleccionarPonente(e){\r\n            const ponente = e.target;\r\n            // Remover las clase previa\r\n            const ponentePrevio = document.querySelector('.listado-ponentes__ponente--seleccionado');\r\n            if(ponentePrevio){\r\n                ponentePrevio.classList.remove('listado-ponentes__ponente--seleccionado');\r\n            }\r\n            \r\n            ponente.classList.toggle('listado-ponentes__ponente--seleccionado');\r\n            ponenteHidden.value = ponente.dataset.ponenteId;\r\n        }\r\n    }\r\n})();"]}